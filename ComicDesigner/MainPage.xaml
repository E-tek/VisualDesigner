<Page
    x:Class="ComicDesigner.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:view="using:StyleMVVM.View"
    xmlns:comicDesigner="using:ComicDesigner"
    xmlns:designSurface="using:Glass.Design.WinRT.DesignSurface"
    xmlns:winRt="using:Glass.Design.WinRT"
    xmlns:delay="using:Delay"
    view:ViewModel.Name="MainViewModel"
    mc:Ignorable="d" d:DataContext="{d:DesignInstance comicDesigner:MainViewModel}">
    <Page.Resources>
        <comicDesigner:TypedTemplateSelector x:Key="TypedTemplateSelector"
                                             DefaultTemplateKey="DefaultTemplate" />
        <DataTemplate x:Key="Type:CanvasRectangle">
            <Rectangle Fill="Red" Width="30" Height="30" />
        </DataTemplate>
        <DataTemplate x:Key="DefaultTemplate">
            <Rectangle Fill="Blue" />
        </DataTemplate>
    </Page.Resources>

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Button Content="Sample button" />
        <designSurface:DesignSurface ItemsSource="{Binding Items}">
            <designSurface:DesignSurface.ItemTemplate>
                <DataTemplate>
                    <Rectangle Fill="Red" />
                </DataTemplate>
            </designSurface:DesignSurface.ItemTemplate>
            <designSurface:DesignSurface.ItemTemplateSelector>
                <StaticResource ResourceKey="TypedTemplateSelector" />
            </designSurface:DesignSurface.ItemTemplateSelector>

            <!-- I DON'T KNOW WHY THIS DOESN'T WORK AND THE SAME IN THE BUTTON (BELOW) WORKS PERFECTLY -->
            <designSurface:DesignSurface.ItemContainerStyle>                
                <Style TargetType="winRt:CanvasItemControl">
                    <Setter Property="delay:SetterValueBindingHelper.PropertyBinding">
                        <Setter.Value>
                            <delay:SetterValueBindingHelper
                                Property="Left"
                                Binding="{Binding Name}"/>
                        </Setter.Value>
                    </Setter>                   
                </Style>                
            </designSurface:DesignSurface.ItemContainerStyle>
            
        </designSurface:DesignSurface>

        <Button
            Grid.Column="1"
            Grid.ColumnSpan="2"
            DataContext="Coco">
            <Button.Style>
                <Style TargetType="Button">
                    <!-- WPF syntax:
                    <Setter Property="Content" Value="{Binding}"/> -->
                    <Setter Property="delay:SetterValueBindingHelper.PropertyBinding">
                        <Setter.Value>
                            <delay:SetterValueBindingHelper
                                Property="Content"
                                Binding="{Binding}"/>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Button.Style>
        </Button>
    </Grid>
</Page>
