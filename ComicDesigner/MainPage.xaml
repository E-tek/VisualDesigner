<Page
    x:Class="ComicDesigner.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:view="using:StyleMVVM.View"
    xmlns:comicDesigner="using:ComicDesigner"
    xmlns:designSurface="using:Glass.Design.WinRT.DesignSurface"
    view:ViewModel.Name="MainViewModel"
    mc:Ignorable="d" d:DataContext="{d:DesignInstance comicDesigner:MainViewModel}">
    <Page.Resources>
        <comicDesigner:TypedTemplateSelector x:Key="TypedTemplateSelector"
                                             DefaultTemplateKey="DefaultTemplate" />
        <DataTemplate x:Key="Type:CanvasRectangle">
            <Rectangle Fill="Red" Width="30" Height="30" />
        </DataTemplate>
        <DataTemplate x:Key="DefaultTemplate">
            <Rectangle Fill="Blue" />
        </DataTemplate>
    </Page.Resources>

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Button Content="Sample button" />
        <designSurface:DesignSurface ItemsSource="{Binding Items}">
            <designSurface:DesignSurface.ItemTemplate>
                <DataTemplate>
                    <Rectangle Fill="Red" />
                </DataTemplate>
            </designSurface:DesignSurface.ItemTemplate>
            <designSurface:DesignSurface.ItemTemplateSelector>
                <StaticResource ResourceKey="TypedTemplateSelector" />
            </designSurface:DesignSurface.ItemTemplateSelector>

            <!--WINRT DON'T SUPPORT STYLE SETTERS TO HAVE BINDING AS VALUE!--><!--
            <designSurface:DesignSurface.ItemContainerStyle>                
                <Style TargetType="winRt:CanvasItemControl">
                    <Setter Property="Left"
                                Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content.Left}" />
                    <Setter Property="Top"
                                Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content.Top}" />
                    <Setter Property="Width"
                                Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content.Width}" />
                    <Setter Property="Height"
                                Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content.Height}" />
                </Style>                
            </designSurface:DesignSurface.ItemContainerStyle>-->
            
        </designSurface:DesignSurface>       
    </Grid>
</Page>
