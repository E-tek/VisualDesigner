<Window x:Class="Glass.Design.WpfTester.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
        xmlns:designSurfaceWpf="clr-namespace:Glass.Design.Wpf.DesignSurface;assembly=Glass.Design.Wpf"
        xmlns:ds="clr-namespace:Glass.Design.Pcl.DesignSurface;assembly=Glass.Design.Pcl"
        xmlns:dsCore="clr-namespace:Glass.Design.Pcl.Core;assembly=Glass.Design.Pcl"
        xmlns:sampleModel="clr-namespace:SampleModel;assembly=SampleModel"
        xmlns:viewing="clr-namespace:Glass.Design.Wpf.Viewing;assembly=Glass.Design.Wpf"
        xmlns:wpf="clr-namespace:Glass.Design.Wpf;assembly=Glass.Design.Wpf"
        xmlns:canvasItem="clr-namespace:Glass.Design.Pcl.CanvasItem;assembly=Glass.Design.Pcl"
        WindowStartupLocation="CenterScreen"
        x:Name="Window"
        Title="Glass Design Demo" Width="700" Height="560">
    <Window.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Glass.Design.Wpf;component/Themes/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <DataTemplate DataType="{x:Type sampleModel:CanvasRectangle}">
                <Rectangle Fill="{Binding FillColor, Converter={StaticResource ColorConverter}}" />
            </DataTemplate>
            <DataTemplate DataType="{x:Type sampleModel:Ellipse}">
                <Ellipse Fill="{Binding FillColor, Converter={StaticResource ColorConverter}}" />
            </DataTemplate>
            <DataTemplate DataType="{x:Type sampleModel:Group}">
                <Grid>                    
                    
                    <viewing:ViewingSurface ItemsSource="{Binding Children}">
                        <viewing:ViewingSurface.ItemContainerStyle>
                            <Style TargetType="{x:Type wpf:CanvasItemControl}">
                                <Setter Property="BorderThickness" Value="0" />
                                <Setter Property="Left" Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:IPositionable.Left)}" />
                                <Setter Property="Top" Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:IPositionable.Top)}" />
                                <Setter Property="Width" Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:ISizable.Width)}" />
                                <Setter Property="Height" Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:ISizable.Height)}" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type wpf:CanvasItemControl}">
                                            <ContentPresenter Content="{TemplateBinding Content}" />
                                        </ControlTemplate>
                                    </Setter.Value>                                    
                                </Setter>
                            </Style>
                        </viewing:ViewingSurface.ItemContainerStyle>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <Canvas IsItemsHost="True" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </viewing:ViewingSurface>
                    <Border BorderBrush="Aqua" BorderThickness="1" Background="Transparent">
                        <TextBlock Text="Group" FontSize="7"></TextBlock>
                    </Border>
                </Grid>

            </DataTemplate>
            <DataTemplate DataType="{x:Type sampleModel:Mario}">
                <Image Stretch="Fill" Source="/Images/Mario.png"  />
            </DataTemplate>

            <DataTemplate DataType="{x:Type sampleModel:Link}">
                <Image Stretch="Fill" Source="/Images/Link.png"  />
            </DataTemplate>
            <DataTemplate DataType="{x:Type sampleModel:Sonic}">
                <Image Stretch="Fill" Source="/Images/Sonic.png"  />
            </DataTemplate>
        </ResourceDictionary>
    </Window.Resources>

    <DockPanel>
        <ToolBarTray DockPanel.Dock="Top">
            <ToolBar>
                <Button Command="{x:Static designSurfaceWpf:DesignSurfaceCommands.GroupCommand}" CommandTarget="{Binding ElementName=DesignSurface}"
                        Content="Group" CommandParameter="{Binding ElementName=Window, Path=GroupCommandArgs}" />
                <Button Command="{x:Static designSurfaceWpf:DesignSurfaceCommands.PromoteChildrenCommand}" CommandTarget="{Binding ElementName=DesignSurface}"
                        Content="Ungroup"  />
                <Button Command="{x:Static designSurfaceWpf:DesignSurfaceCommands.AlignHorizontallyCommand}"
                        CommandTarget="{Binding ElementName=DesignSurface}"
                        Content="Align to Left">
                    <Button.CommandParameter>
                        <dsCore:HorizontalAlignment>Left</dsCore:HorizontalAlignment>
                    </Button.CommandParameter>
                </Button>
                <Button Command="{x:Static designSurfaceWpf:DesignSurfaceCommands.AlignHorizontallyCommand}"
                        CommandTarget="{Binding ElementName=DesignSurface}"
                        Content="Align to Center">
                    <Button.CommandParameter>
                        <dsCore:HorizontalAlignment>Center</dsCore:HorizontalAlignment>
                    </Button.CommandParameter>
                </Button>
                <Button Command="{x:Static designSurfaceWpf:DesignSurfaceCommands.AlignHorizontallyCommand}"
                        CommandTarget="{Binding ElementName=DesignSurface}"
                        Content="Align to Right">
                    <Button.CommandParameter>
                        <dsCore:HorizontalAlignment>Right</dsCore:HorizontalAlignment>
                    </Button.CommandParameter>
                </Button>
                <Button Command="{x:Static designSurfaceWpf:DesignSurfaceCommands.AlignVerticallyCommand}"
                        CommandTarget="{Binding ElementName=DesignSurface}"
                        Content="Align to Top">
                    <Button.CommandParameter>
                        <dsCore:VerticalAlignment>Top</dsCore:VerticalAlignment>
                    </Button.CommandParameter>
                </Button>
                <Button Click="ButtonBase_OnClick" Content="Mover>"></Button>
            </ToolBar>
        </ToolBarTray>
        <Grid>
            <designSurfaceWpf:DesignSurface Background="Azure" x:Name="DesignSurface">
                <designSurfaceWpf:DesignSurface.ItemContainerStyle>
                    <Style TargetType="{x:Type wpf:CanvasItemControl}">
                        <Setter Property="Left"
                                Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:IPositionable.Left)}" />
                        <Setter Property="Top"
                                Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:IPositionable.Top)}" />
                        <Setter Property="Width"
                                Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:ISizable.Width)}" />
                        <Setter Property="Height"
                                Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.(ds:ISizable.Height)}" />
                    </Style>
                </designSurfaceWpf:DesignSurface.ItemContainerStyle>
                <sampleModel:CanvasRectangle Top="0" Left="0" Width="200" Height="200">
                    <sampleModel:CanvasRectangle.FillColor>
                        <sampleModel:Color R="255" G="230" B="10" />
                    </sampleModel:CanvasRectangle.FillColor>
                </sampleModel:CanvasRectangle>
                <sampleModel:Ellipse Top="300" Left="300" Width="150" Height="150">
                    <sampleModel:Ellipse.FillColor>
                        <sampleModel:Color R="44" G="66" B="200" />
                    </sampleModel:Ellipse.FillColor>
                </sampleModel:Ellipse>
                <sampleModel:Group Top="200" Left="200" Width="100" Height="100">
                    <sampleModel:Group.Children>
                        <canvasItem:CanvasItemCollection>
                            <sampleModel:Sonic Left="25" Width="50" Height="70" Top="0" />
                            <sampleModel:Mario Left="20" Width="50" Height="30" Top="60" />                            
                        </canvasItem:CanvasItemCollection>
                    </sampleModel:Group.Children>
                </sampleModel:Group>
            </designSurfaceWpf:DesignSurface>


            <TextBlock Margin="10" FontSize="18" FontFamily="Verdana"
                       Text="This is the Designer Surface. Drag and resize items!" IsHitTestVisible="False" />
        </Grid></DockPanel>
</Window>
